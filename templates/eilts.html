<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eilts Test</title>
    <link rel="stylesheet" href="../static/eilts.css">
</head>
<body>
    <div class="test">
        <div class="test-lable">
            <div class="test-lable-1">This is Eilst test</div>
            <div id="aboutTestBTN" class="test-lable-block">About Test</div>
            <div id="hiddenLable" class="hidden-lable">
                <div id="CloseHidden" class="close-hidden-lable">X</div>
                <div class="lable">
                    <form action="/test/result/page" method="POST" enctype="multipart/form-data">
                        <input style="opacity: 0;" name="Result" id="postAdwer" type="number">
                    </form>
                    <div class="hidden-lable-1">You can determine your English proficiency level with this test</div>
                    <div class="hidden-lable-2">The creator of this test and the website is <a href="https://aziz-mardonqulov-web.netlify.app">Aziz Mardonqulov</a></div>
                    <div class="hidden-lable-3">The test consists of 20 questions. Each question is given 45 seconds, and the total duration is 1.3 minutes.</div>
                    <div class="test-lable-3">
                        If the score is higher than 5 but up to 40, the level is A1. <br>
    
                        If the score is between 40 and 50, the level is A2. <br>
                        
                        If the score is between 50 and 70, the level is B1. <br>
                        
                        If the score is between 70 and 80, the level is B2. <br>
                        
                        If the score is above 80 but up to 90, the level is C1. <br>
                        If the score is above 90, the level is C2.  <div id="result" class=""></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="test-in-lable-1">You are<ul>
            <li><span>Student</span></li>
            <li><span>Mentor</span></li>
            <li><span>Time Wester</span></li>
        </ul></div>
    </div>
    <div class="bottom-button">
        <div id="OpenTest" class="open-test">Get Starts</div>
    </div>
    <div class="test-part" id="Test">
        <div id="closeTest" class="close-test">X</div>
        <div class="test-part-img">
            <img width="200px" src="../static/img/navbar/craiyon_144931_transparent.png" alt="notfound">
        </div>
        <div class="quasion-block">
            <div id="start" class="START" style="font-size: 25px; display: flex; gap: 1.5rem;">Start Test <div class="" style="color: #777;">but lorem ipsum dolor  amet, veniam ducimus.</div> </div>
            {% for question in quasion %}
            <li id="test" class="testProjeckt">
                <div class="quasion">{{ question['id'] }}.  {{ question['quasion'] }}</div>
               <div  class="obsion">
                    <div id="obsion" class="obsion-1">{{ question['obsion'].split(', ')[0] }}</div>
                    <div id="obsion" class="obsion-1">{{ question['obsion'].split(', ')[1] }}</div>
                    <div id="obsion" class="obsion-1">{{ question['obsion'].split(', ')[2] }}</div>
                    <div id="obsion" class="obsion-1">{{ question['obsion'].split(', ')[3] }}</div>
            </div>
               <div id="adwers" class="adwers">{{ question['addvers'] }}</div>
            </li>
        {% endfor %}
        <div class="min"><div class="min-width"></div></div>
        <div class="quasion-buttons">
            <div id="restart" class="quasion-button-1">Restart {{scrore}}</div>
            <a id="enter"  class="quasion-button-2">Enter</a>
        </div>
        </div>
    </div>
    </div>
    <div id="resultIn" class="result">
        <div class="result-block">
            <h1 style="display: flex; flex-direction: row; gap: 1rem;">Your level <div id="level"></div></h1>
            <h4>your full score<div id="point" class="point"></div></h4>
            <h4>Are you satisfied with your result? <a href="/">satisfied</a></h5>
            <a href="/">Open Home page</a>
        </div>
        </div> 
    <script>
        let hiddenLable = document.getElementById("hiddenLable");
        let aboutTestBTN = document.getElementById("aboutTestBTN");
        let CloseHidden = document.getElementById("CloseHidden")
        let test = document.querySelectorAll("#test");
        let obsion =document.querySelectorAll("#obsion");
        let truuAdd = document.getElementById("")
        let restart = document.getElementById("restart");
        let enter = document.getElementById("enter");
        let result =document.getElementById("result");
        let OpenTest = document.getElementById("OpenTest");
        let closeTest = document.getElementById("closeTest");
        let Test = document.getElementById("Test");
        let postAdwer = document.getElementById("postAdwer")
        let from = document.querySelector("form");
        let resultIn = document.getElementById("resultIn")
        let level = document.getElementById("level");
        let text ="";
        let start = document.getElementById("start");
        let point = document.getElementById("point")
        let quasionButton2 = document.querySelector(".quasion-button-2") 

        OpenTest.addEventListener("click" , function(){
            Test.style.top="0";
        })
        closeTest.addEventListener("click" , function(){
            Test.style.top="150vh";
        })
        closeTest.addEventListener("click" , function(){

        })
        aboutTestBTN.addEventListener("click" , function(){
            hiddenLable.style.top="0";
        })
        CloseHidden.addEventListener("click" , function(){
            hiddenLable.style.top = "-150vh";
        })


        function quasion(){
            let num =0;
            let num2 =0;

            enter.addEventListener("click" , function(){
                quasionButton2.style.padding= "20px 20%";
                start.style.display="none";
                    for (let i=0; i < num;i++){
                        test[i].classList.remove("active");
                        test[num].classList.add("active");
                        let selectedOption = document.querySelector(".clickButton");
                        let adwers =document.querySelectorAll("#adwers")

                        if (num >= 19) {
                            resultIn.style.top="0";
                            console.log(num)
    
                        }
                        for(let i=0; i < adwers.length;i++){
                            console.log(adwers.length)
                            }

                        }
            
                   
                        let selectedOption = document.querySelector(".clickButton");
                            if (selectedOption) {
                                let adwersText = adwers[num - 1].textContent.trim(); 
                                if (selectedOption.textContent.trim() === adwersText) {
                                    num2 = num2 + 1;
                                    result.textContent = `Score: ${num2}`;
                                    postAdwer.value=num2;
                                    let resultNum = num2 *7;
                                    if (resultNum >= 0 && resultNum < 40 ){
                                        text = "You are a beginner. You need to practice more."
                                    }
                                    else if (resultNum >= 30 && resultNum < 40){
                                            text = "A1";
                                    }
                                    else if (resultNum >= 40 && resultNum < 50){
                                            text = "A2";
                                    }
                                    else if (resultNum >= 50 && resultNum < 60){
                                            text = "B1";
                                    }
                                    else if (resultNum >= 60 && resultNum < 80){
                                            text = "B2";
                                    }
                                    else if (resultNum >= 80 && resultNum < 90){
                                            text = "C1";
                                    }
                                    else if (resultNum >= 90 ){
                                            text = "C2";
                                    }
                                    level.innerText=text;
                                    point.innerHTML=`${resultNum} point`;
        };
                            }
        for (let i=0; i < 1;i++){
                test[num].classList.add("active");
                for (let i=0 ; i<obsion.length; i++){
                obsion[i].addEventListener("click" , function(){
                    obsion.forEach(btn => btn.classList.remove("clickButton"));
                    this.classList.add("clickButton");             
                })
            }}

            num += 1;
        
        })}
        quasion()
    </script>
</body>
</html>